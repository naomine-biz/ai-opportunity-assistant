
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼†ä¾å­˜é–¢ä¿‚ãƒ«ãƒ¼ãƒ«

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã‘ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ä¾å­˜é–¢ä¿‚ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹ã€‚

---

## ğŸ¯ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```plaintext
project_root/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py               # FastAPIã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ api/                  # APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ slack_routes.py
â”‚   â”‚   â””â”€â”€ api_routes.py
â”‚   â”œâ”€â”€ models/               # SQLModel / Pydanticãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ opportunity.py
â”‚   â”‚   â””â”€â”€ activity.py
â”‚   â”œâ”€â”€ db/                   # DBã‚¢ã‚¯ã‚»ã‚¹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ session.py
â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”œâ”€â”€ agents/               # AIå‡¦ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ parser.py
â”‚   â”‚   â””â”€â”€ kpi_checker.py
â”‚   â”œâ”€â”€ slack/                # Slacké€£æºå‡¦ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ bot.py
â”‚   â”‚   â””â”€â”€ handlers.py
â”‚   â”œâ”€â”€ scheduler/            # å®šæœŸå‡¦ç†ï¼ˆAPSchedulerç®¡ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ task_runner.py
â”‚   â”œâ”€â”€ core/                 # å…±é€šè¨­å®šãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â””â”€â”€ logger.py
â”‚   â””â”€â”€ services/             # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ opportunity_service.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_api.py
â”‚   â”œâ”€â”€ test_agents.py
â”‚   â””â”€â”€ test_db.py
â”œâ”€â”€ .env
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ğŸ¯ ä¾å­˜é–¢ä¿‚ãƒ«ãƒ¼ãƒ«è¡¨

| Sourceï¼ˆå‘¼ã³å‡ºã—å…ƒï¼‰ | Allowed Targetï¼ˆä¾å­˜å¯èƒ½å…ˆï¼‰ | Forbidden Targetï¼ˆä¾å­˜ç¦æ­¢å…ˆï¼‰              |
| -------------------- | ---------------------------- | ------------------------------------------- |
| `slack/`             | `api/`                       | `services/`, `db/`, `agents/`, `scheduler/` |
| `api/`               | `services/`                  | `db/`, `agents/`, `scheduler/`              |
| `services/`          | `db/`, `agents/`             | `api/`, `slack/`, `scheduler/`              |
| `scheduler/`         | `services/`                  | `api/`, `slack/`, `db/`, `agents/`          |
| `db/`                | ï¼ˆãªã—ï¼‰                     | å…¨ã¦                                        |
| `agents/`            | ï¼ˆãªã—ï¼‰                     | å…¨ã¦                                        |

---

## ğŸ“Œ ãƒ«ãƒ¼ãƒ«ã®åŸºæœ¬æ–¹é‡

- **ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰ä¸‹ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿ä¾å­˜å¯**
- **ä¸‹ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ä¾å­˜ç¦æ­¢**
- **æ¨ªã®ä¾å­˜ã‚‚ç¦æ­¢ï¼ˆåŒãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ç›´æ¥ä¾å­˜ãªã—ï¼‰**

`scheduler/` ã¯ `services/` ã®ã¿ä¾å­˜å¯èƒ½ã¨ã—ã€**ç›´æ¥Slacké€ä¿¡ã¯è¡Œã‚ãšã€ServiceçµŒç”±ã§Slacké€ä¿¡å‡¦ç†ã‚’å‘¼ã³å‡ºã™**

---

## ğŸ“ Import Linter è¨­å®šç”¨contractä¾‹

```yaml
contracts:
  - name: "APIã‹ã‚‰DBç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.api
      forbidden:
        - app.db

  - name: "APIã‹ã‚‰Agentç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.api
      forbidden:
        - app.agents

  - name: "APIã‹ã‚‰Schedulerç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.api
      forbidden:
        - app.scheduler

  - name: "Slackã‹ã‚‰Services, DB, Agents, Schedulerç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.slack
      forbidden:
        - app.services
        - app.db
        - app.agents
        - app.scheduler

  - name: "Servicesã‹ã‚‰API, Slack, Schedulerç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.services
      forbidden:
        - app.api
        - app.slack
        - app.scheduler

  - name: "Schedulerã‹ã‚‰API, Slack, DB, Agentsç›´ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.scheduler
      forbidden:
        - app.api
        - app.slack
        - app.db
        - app.agents

  - name: "DBã‹ã‚‰ä»–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.db
      forbidden:
        - app.api
        - app.services
        - app.agents
        - app.slack
        - app.scheduler

  - name: "Agentsã‹ã‚‰ä»–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜ç¦æ­¢"
    type: forbidden
    modules:
      source: app.agents
      forbidden:
        - app.api
        - app.services
        - app.db
        - app.slack
        - app.scheduler
```

---

## ğŸ“ è£œè¶³

- `app` ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆé…ä¸‹ã®Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å
- Import Linterã®è¨­å®šã¯ `importlinter.yml` ã¾ãŸã¯ `pyproject.toml` ã«è¨˜è¿°
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å¸¸ã«åŒæœŸã™ã‚‹ã“ã¨

---

ä»¥ä¸Š
