# アクティブコンテキスト

## 現在の作業焦点

### 現在のフェーズ
- **設計フェーズ**
  - 要件定義完了
  - 技術選定完了
  - アーキテクチャ設計完了
  - API仕様定義完了
  - DB設計完了
  - 各種設計方針文書化完了

### 次のフェーズ
- **実装フェーズ**
  - プロジェクト構造の作成
  - 基本モジュールの実装
  - Slack連携の実装
  - データベース連携の実装
  - 自然言語処理モジュールの実装
  - スケジューラーの実装

## 最近の変更

### 設計ドキュメント作成
- 要件定義書の作成
- ディレクトリ構成と依存関係ルールの定義
- API仕様書の作成
- DB仕様書の作成
- スケジューラー設計方針の策定
- テスト設計方針の策定
- ログ設計方針の策定
- 開発ワークフロー設計の策定
- 技術選定の確定
- 設定管理方針の策定
- 認証認可設計方針の策定

### マスタデータ準備
- アクティビティ種別マスタデータの作成
- 案件ステージマスタデータの作成

## 次のステップ

### 短期的なタスク
1. **プロジェクト構造のセットアップ**
   - ディレクトリ構造の作成
   - 依存関係管理ファイルの作成（requirements.txt または pyproject.toml）
   - .env.example ファイルの作成

2. **基本モジュールの実装**
   - core/config.py の実装
   - core/logger.py の実装
   - models/ 以下のデータモデル定義
   - db/session.py の実装

3. **Slack連携の基本実装**
   - slack/bot.py の実装
   - slack/handlers.py の実装
   - Slack Event API受信エンドポイントの実装

### 中期的なタスク
1. **自然言語処理モジュールの実装**
   - agents/parser.py の実装
   - テキスト解析ロジックの実装

2. **サービス層の実装**
   - services/opportunity_service.py の実装
   - ビジネスロジックの実装

3. **スケジューラーの実装**
   - scheduler/task_runner.py の実装
   - 定期通知ロジックの実装

4. **テストの実装**
   - テスト環境のセットアップ
   - ユニットテストの実装
   - APIテストの実装

## アクティブな決定事項と考慮事項

### 決定済み事項
- FastAPIをバックエンドフレームワークとして採用
- PostgreSQLをデータベースとして採用
- SQLModelをORMとして採用
- APSchedulerをスケジューラーとして採用
- 依存関係ルールの確立（上位レイヤーから下位レイヤーのみ依存可）
- Slack署名検証による認証方式の採用

### 検討中の事項
- 自然言語処理の具体的な実装方法（OpenAI API vs 独自モデル）
- KPI通知ロジックの詳細設計
- 将来的な機械学習モデルの導入方針
- デプロイ環境の選定

## 学びとプロジェクトの洞察

### 重要なパターンと設計方針
- **レイヤードアーキテクチャ**の採用により、責務の分離と依存関係の明確化を実現
- **リポジトリパターン**によるデータアクセスの抽象化
- **依存性注入**によるテスト容易性の向上
- **イベント駆動型**のSlack連携処理

### プロジェクト固有の知見
- Slack Botを中心としたUI設計により、従来のWeb UIが不要に
- 自然言語入力による構造化データ変換が核となる機能
- ルールベースから機械学習ベースへの段階的な移行を想定した設計
